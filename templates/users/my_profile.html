{% extends "base.html" %}
{% block content %}

<div class="container py-4" style="max-width: 1000px;">

  <!-- Header du profil -->
  <div class="d-flex justify-content-between align-items-center mb-4">

    <div class="d-flex align-items-center gap-3">
      {% if user_obj.profile_image %}
        <img src="{{ user_obj.profile_image.url }}"
             alt="Photo de profil"
             class="rounded-circle"
             style="width:72px; height:72px; object-fit:cover;">
      {% else %}
        <div class="rounded-circle bg-secondary text-white d-flex align-items-center justify-content-center"
             style="width:72px; height:72px;">
          {{ user_obj.username|first|upper }}
        </div>
      {% endif %}

      <div>
        <h1 class="mb-1">Mon profil</h1>
        <p class="text-muted mb-0">
          {{ user_obj.username }} â€” {{ user_obj.email }}
        </p>
      </div>
    </div>

    <a href="{% url 'users:profile' %}" class="btn btn-outline-primary btn-sm">
      Modifier le profil
    </a>
  </div>


  <div class="row g-4">

    <!-- Colonne gauche : Posts -->
    <div class="col-md-6">
      <h4 class="mb-3">Mes publications</h4>

      {% if posts %}
        <div class="list-group">
          {% for post in posts %}
            <div class="list-group-item">
              <div class="fw-semibold">
                {{ post.title }}
              </div>
              <div class="small text-muted">
                {{ post.get_post_type_display }} â€” {{ post.created_at|date:"d/m/Y H:i" }}
              </div>
              <p class="mb-1 mt-2">
                {{ post.content|truncatechars:120 }}
              </p>
            </div>
          {% endfor %}
        </div>
      {% else %}
        <p class="text-muted">Tu n'as pas encore publiÃ© de post.</p>
      {% endif %}
    </div>

    <!-- Colonne droite : Ã‰vÃ©nements -->
    <div class="col-md-6">
      <h4 class="mb-3">Mes Ã©vÃ©nements</h4>

      {% if events %}
        <div class="list-group">
          {% for event in events %}
            <a href="{% url 'events:detail' event.pk %}"
               class="list-group-item list-group-item-action">
              <div class="fw-semibold">
                {{ event.title }}
              </div>
              <div class="small text-muted">
                ğŸ“ {{ event.get_location_display }}
                â€” ğŸ•’ {{ event.start_at|date:"d/m/Y H:i" }}
              </div>
            </a>
          {% endfor %}
        </div>
      {% else %}
        <p class="text-muted">Tu n'as pas encore crÃ©Ã© d'Ã©vÃ©nement.</p>
      {% endif %}
    </div>

  </div>
</div>

{% endblock %}
