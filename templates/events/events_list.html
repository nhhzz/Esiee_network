{% extends "base.html" %}
{% block content %}

<meta charset="UTF-8">
<title>Liste des √©v√©nements</title>

<style>
    body {
        font-family: Arial, sans-serif;
        background-color: #f4f6f8;
        margin: 0;
        padding: 0;
    }

    header {
        background-color: #2c3e50;
        color: white;
        padding: 20px;
        text-align: center;
    }

    main {
        max-width: 900px;
        margin: 30px auto;
        padding: 20px;
        background-color: white;
        border-radius: 6px;
        box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    h1 {
        margin-top: 0;
    }

    .event {
        border-bottom: 1px solid #ddd;
        padding: 15px 0;
    }

    .event:last-child {
        border-bottom: none;
    }

    .event-title {
        font-size: 18px;
        font-weight: bold;
        color: #34495e;
    }

    .event-date {
        color: #777;
        font-size: 14px;
    }

    .event-location {
        color: #2c3e50;
        font-size: 14px;
        margin-top: 4px;
        font-weight: bold;
    }

    .empty {
        text-align: center;
        color: #999;
        font-style: italic;
    }

    .filter-info {
        font-size: 14px;
        color: #555;
        margin-bottom: 10px;
    }

    .badge-filter {
        display: inline-block;
        background-color: #e3f2fd;
        color: #0d47a1;
        padding: 4px 8px;
        border-radius: 999px;
        font-size: 12px;
        font-weight: 600;
    }
</style>

<header>
    <h1>üìÖ √âv√©nements</h1>
    <p>Liste des √©v√©nements disponibles</p>
</header>

<main>

    <!-- Barre titre + bouton cr√©ation -->
    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
        <div>
            <h2 style="margin:0; color:#34495e;">Liste</h2>

            {# Info de filtre si un lieu est s√©lectionn√© #}
            {% if filtered_location %}
                <div class="filter-info">
                    Filtr√© sur le lieu :
                    <span class="badge-filter">{{ filtered_location }}</span>
                    <a href="{% url 'events:list' %}" style="margin-left:8px; font-size:12px;">
                        (effacer le filtre)
                    </a>
                </div>
            {% endif %}
        </div>

        <a href="{% url 'events:create' %}"
           style="background:#2c3e50; color:white; padding:10px 14px; border-radius:6px; text-decoration:none; font-weight:bold;">
            + Cr√©er un √©v√©nement
        </a>
    </div>

    {% if events %}
        {% for event in events %}
            <div class="event">
                <div class="event-title">
                    <a href="{% url 'events:detail' event.pk %}"
                       style="text-decoration:none; color:inherit;">
                        {{ event.title }}
                    </a>
                </div>

                <div class="event-date">
                    üïí {{ event.start_at|date:"d/m/Y H:i" }}
                </div>

                <div class="event-location">
                    üìç {{ event.get_location_display }}
                </div>
            </div>
        {% endfor %}
    {% else %}
        {% if raw_location %}
            <p class="empty">Aucun √©v√©nement √† l'instant pour ce lieu.</p>
        {% else %}
            <p class="empty">Aucun √©v√©nement disponible pour le moment.</p>
        {% endif %}
    {% endif %}

</main>

{% endblock %}
